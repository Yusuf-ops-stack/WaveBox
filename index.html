<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>WaveBox Music Player</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<meta name="theme-color" content="#38bdf8">
<style>
:root{
  --bg:#0f172a; --panel:#020617; --card:#1e293b; --text:#fff; --accent:#38bdf8;
}
.light{
  --bg:#f1f5f9; --panel:#fff; --card:#e5e7eb; --text:#020617; --accent:#0284c7;
}
*{margin:0;padding:0;box-sizing:border-box;font-family:Arial,sans-serif}
body{background:var(--bg);color:var(--text);height:100vh;overflow-x:hidden;display:flex;justify-content:center;align-items:center;}

/* Layout */
.app{display:flex;width:100%;max-width:900px;flex-direction:row;box-shadow:0 0 20px rgba(0,0,0,0.3);border-radius:16px;overflow:hidden;background:var(--panel);}
.sidebar{width:220px;background:var(--panel);padding:20px;flex-shrink:0;transition: transform 0.3s ease;display:flex;flex-direction:column;align-items:center;}
.sidebar h1{color:var(--accent);margin-bottom:10px;}
.sidebar label, .sidebar button{
  margin-top:10px;padding:10px;width:100%;border:none;border-radius:8px;
  background:var(--accent);color:white;cursor:pointer;text-align:center;
}
.player{flex:1;display:flex;flex-direction:column;align-items:center;padding:20px;overflow-y:auto;width:100%;}
.cover{width:220px;height:220px;border-radius:16px;object-fit:cover;box-shadow:0 10px 30px rgba(0,0,0,.5);transition: width 0.3s, height 0.3s;margin-bottom:15px;}
#title{margin:10px 0;font-size:20px;text-align:center;}
.controls{display:flex;justify-content:center;align-items:center;margin:15px 0;}
.controls button{background:none;border:none;font-size:26px;margin:0 10px;color:var(--text);cursor:pointer;}
input[type=range]{width:80%;margin:10px 0;border-radius:8px;}
#playlist{list-style:none;width:100%;max-width:400px;margin-top:15px;}
#playlist li{padding:10px;border-radius:8px;cursor:pointer;margin-bottom:5px;background:var(--card);}
#playlist li.active,#playlist li:hover{background:var(--accent);}

/* Responsive */
@media(max-width:700px){
  body{padding:10px;}
  .app{flex-direction:column;width:100%;}
  .sidebar{width:100%;flex-direction:row;justify-content:space-around;padding:10px;order:2;}
  .player{width:100%;padding:10px;order:1;}
  .cover{width:150px;height:150px;}
  input[type=range]{width:95%;}
  #playlist li{padding:8px;font-size:14px;}
  .controls button{font-size:22px;margin:0 5px;}
}
</style>
</head>
<body>

<div class="app">
  <div class="sidebar">
    <h1>ðŸŽ§ WaveBox</h1>
    <label>âž• Add Songs<input type="file" id="fileInput" multiple accept="audio/*" hidden></label>
    <button onclick="toggleTheme()">ðŸŒ— Theme</button>
  </div>

  <div class="player">
    <img id="cover" class="cover" src="/favIcon.ico">
    <h2 id="title">No song selected</h2>

    <div class="controls">
      <button onclick="prevSong()"><i class="fa-solid fa-backward"></i></button>
      <button onclick="playPause()"><i class="fa-solid fa-play"></i></button>
      <button onclick="nextSong()"><i class="fa-solid fa-forward"></i></button>
    </div>

    <input type="range" id="volume" min="0" max="1" step="0.01">
    <ul id="playlist"></ul>

    <audio id="audio"></audio>
  </div>
</div>

<script>
// Core
let songs=[], index=0;
const audio=document.getElementById("audio");
const title=document.getElementById("title");
const cover=document.getElementById("cover");
const volume=document.getElementById("volume");
const playlist=document.getElementById("playlist");
const fileInput=document.getElementById("fileInput");

fileInput.addEventListener("change", () => { 
  [...fileInput.files].forEach(file=>{
    songs.push({title: file.name.replace(/\.[^/.]+$/, ""), src: URL.createObjectURL(file), cover: "cover.jpg"});
  });
  if(!audio.src && songs.length) loadSong(0);
  updatePlaylist();
  fileInput.value="";
});

function loadSong(i){
  if(!songs.length) return;
  index=i;
  audio.src=songs[i].src;
  title.textContent=songs[i].title;
  cover.src=songs[i].cover;
  updatePlaylist();
}

async function playPause(){try{audio.paused?await audio.play():audio.pause();}catch(e){}}
function nextSong(){if(!songs.length) return; index=(index+1)%songs.length; loadSong(index); audio.play();}
function prevSong(){if(!songs.length) return; index=(index-1+songs.length)%songs.length; loadSong(index); audio.play();}
function toggleTheme(){document.body.classList.toggle("light");}

function updatePlaylist(){
  playlist.innerHTML="";
  songs.forEach((s,i)=>{
    const li=document.createElement("li");
    li.textContent=s.title;
    if(i===index) li.classList.add("active");
    li.onclick=()=>{loadSong(i); audio.play();}
    playlist.appendChild(li);
  });
}
</script>

</body>
</html>
